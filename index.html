<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Бинго</title>
    <link rel="icon" href="src/logo.png" type="image/png">
    <link rel="stylesheet" href="main_style.css">
</head>
<body>
    <header>
        <table class="header">
            <tr>
                <th class="a_logo">
                    <a href="https://t.me/ne_malo">
                        <img src="src/logo.png" class="logo">
                    </a>
                </th>
                <th class="a_logo">
                    <h1 class="single-line-header">Бинго</h1>
                </th>
                <th class="logo_empty"></th>
            </tr>
        </table>
    </header>
    <nav>
        <ul>
            <li><button onclick="window.location.href='https://fynjybath.space/bingo-lksh/';" class="main-button">Обновить</li>
        </ul>
    </nav>

    <div class="tabs" id="div__tabs">
        <input class="tabs__tab" type="radio" id="tabs__tab1" name="tabstab" checked="checked"/>
        <label class="tabs__title" for="tabs__tab1">Главная</label>
        <div class="tabs__text">
            <ul>
                <li><a href="https://msu.ru/" class="link" target="_blank">МГУ</a></li>
                <li><a href="https://internat.msu.ru" target="_blank" class="link">СУНЦ МГУ</a></li>
            </ul>
        </div>
        
        <input class="tabs__tab" type="radio" id="tabs__tab2" name="tabstab"/>
        <label class="tabs__title" for="tabs__tab2">Статьи</label>
        <div class="tabs__text">
            <ul>
                <li><a href="../../odd_pages/article1/article1.html" target="_blank" class="link">"Почему люди иногда ведут себя как бараны?" Анураз Минал Очкобар</a></li>
                <li><a href="../../odd_pages/article2/article2.html" target="_blank" class="link">"СУНЦы ходят в зал!?" Coach</a></li>
                <li><a href="../../odd_pages/article3/article3.html" target="_blank" class="link">"What is herd mentality?" Арслан Гуглевич</a></li>
                <li><a href="../../odd_pages/article4/article4.html" target="_blank" class="link">"Как противостоять стадному чувству?" Поелаг Вкусненько</a></li>
            </ul>
        </div>
    </div>

    <script defer>
        window.addEventListener('DOMContentLoaded', function () {
            const Http = new XMLHttpRequest();
            const url='https://fynjybath.space:3000/get_table';
            Http.open("GET", url);
            Http.send();

            Http.onload = function() {
                const json = JSON.parse(Http.responseText);
                console.log(json);

                const matrix = json['problems'];

                const tab_tab = document.createElement('input');
                tab_tab.type = 'radio';
                tab_tab.class = 'tabs__tab';
                tab_tab.checked = 'checked';
                tab_tab.id = 'tabs__tab0';
                document.getElementById('div__tabs').appendChild(tab_tab);

                const tab_title = document.createElement('label');
                tab_title.class = 'tabs__title';
                tab_title.for = 'tabs__tab0';
                document.getElementById('div__tabs').appendChild(tab_title);

                const tab_text = document.createElement('div');
                tab_text.class = 'tabs__text';

                const table_container = document.createElement('div');
                table_container.class = 'table-container';
                const table = document.createElement('table');
                for (let i = 0; i < matrix.length; i++) {
                    const tableRow = document.createElement('tr');
                    for (let j = 0; j < matrix[i].length; j++) {
                        const tableCell = document.createElement('td');

                        const a = document.createElement('a');
                        a.textContent = matrix[i][j];
                        a.href = json['link'] + "/problem/" + matrix[i][j];

                        tableCell.href = json['link'] + "/problem/" + matrix[i][j];

                        tableCell.appendChild(a);
                        tableRow.appendChild(tableCell);
                    }
                    table.appendChild(tableRow);
                }
                table_container.appendChild(table);
                tab_text.appendChild(table_container);

                document.getElementById('div__tabs').appendChild(tab_text);
            };
        });
    </script>
    
    <footer class="copyright">
        <hr>
        <p>&copy; 2024 All rights reserved.</p>
    </footer>
</body>
</html>
